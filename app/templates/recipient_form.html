{%extends "main.html"%}
{%block content %}
{% block header %}
<div class="row">
    <h1><i class="fa fa-mail-bulk"></i> {% block title %}Ajout d'un nouveau destinataire{% endblock %}</h1>
    {%endblock%}

</div>
<div class="row">

    <div class="col-md-4">
        <div class="alert alert-info">
            <h3><i class="fas fa-info-circle"></i> Note</h3>
            <p>Les contenus des mails sont automatiquement générés à partir des modèles que vous créerez ici. Pour ce
                faire, il faut les indiquer dans le Sujet <code>subject</code> et/ou dans le corps du texte
                <code>body</code>. Ces variables doivent obligatoirement être entourées d'accolades. A titre d'exemple,
                le corps de texte suivant <code>Le salarié {name} {surname}...</code> , ou <code>name</code> est <i>MANCEL</i>
                et <code>surname</code> est <i>Benoit</i> donnera ainsi un mail contenant le message suivant <code>Le
                    salarié MANCEL Benoit...</code>
            <ul>
                <li>
                    Email du déclarant: <code>{email_declarator}</code>
                </li>
                <li>
                    Nom: <code>{name}</code>
                </li>
                <li>
                    Prénom: <code>{surname}</code>
                </li>
                <li>
                    Email: <code>{email}</code>
                </li>
                <li>
                    Date d'arrivée: <code>{arrival_date}</code>
                </li>
                <li>
                    Date de départ: <code>{departure_date}</code>
                </li>
                <li>
                    Délégation territoriale: <code>{territory_unit_id}</code>
                </li>
                <li>
                    Email responsable: <code>{email_referent}</code>
                </li>
                <li>
                    Service/Pôle: <code>{service}</code>
                </li>
                <li>
                    Adresse du lieu de travail: <code>{workplace_address}</code>
                </li>
                <li>
                    Ville du lieu de travail: <code>{workplace_city}</code>
                </li>
                <li>
                    Numéro de téléphone: <code>{phone_number}</code>
                </li>
                <li>
                    Type de poste: <code>{position_type}</code>
                </li>
                <li>
                    Commentaire: <code>{comment}</code>
                </li>
            </ul>
        </div>
    </div>
    <div class="col-md-8">
        <h3><i class="fas fa-user-edit"></i> Formulaire de déclaration</h3>
        <form method="POST" action="{{url_for('main.recipient_add')}}">
            {% for field in form if field.widget.input_type != 'hidden' %}
            <div class="form-group row">
                {% if field.errors %}
                <div class="has-error">
                    {{ field.label(class='col-sm-4 col-form-label') }}
                    <div class="col-sm-8">
                        {{ field }}
                    </div>
                </div>
                <span style="color: red;">{% for error in field.errors %}{{ error }}{% if not loop.last %}<br/>{% endif %}{% endfor %}</span>
                {% else %}
                {{ field.label(class='col-sm-4 col-form-label') }}
                <div class="col-sm-8">
                    {{ field }}
                </div>
                {% endif %}
            </div>
            {% endfor %}
            <div class="text-right">
                <input type="submit" value="Valider" class="btn btn-success btn-block">
            </div>
        </form>
    </div>

</div>
{% endblock %}